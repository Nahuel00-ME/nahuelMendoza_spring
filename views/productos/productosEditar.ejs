<%-include("../partials/head.ejs") %>
    <%-include("../partials/headerAdm.ejs") %>
    <section>
    <div class="caja1-form">
        <div class="container-formulario">
            <h2>Formulario de Editar Productos</h2>
            <div class="edicionProductos">
            <form action="/productos/update/<%= id %>?_method=PUT" class="row" method="post" id="formCreate" enctype="multipart/form-data">
                    <div>
                        <label for="nombre" class="form-label">Nombre::</label>
                        <input type="text" id="nombre1" name="name" value="<%= name %>" class="form-control">
                    </div>
                    <div>
                        <label for="precio" class="form-label" >Precio:</label>
                        <input type="number" id="precio1" name="price" value="<%= price %>" class="form-control">
                    </div>
                    <div>
                        <label for="cantidad" class="form-label" >Cantidad:</label>
                        <input type="number" id="pieces1" name="pieces" value="<%= pieces %>" class="form-control">
                    </div>
                    <div>
                        <label for="descuento" class="form-label">Descuento:</label>
                        <input type="number" id="cantidad1" name="discount" class="form-control">
                    </div>
                    <div>
                        <label for="descripcion" class="form-label">Descripción:</label>
                        <textarea id="descripcion1" name="description" class="form-control"><%= description %></textarea>
                    </div>
                    <div>
                        <label for="category" class="categoria">Categoría:</label>
                        <select name="categoryId" class="form-control">
                            <% categories.forEach(category=> { %>
                                <option value="<%= category.id %>" <%= category.id == categoryId && 'selected' %>>
                                    <%= category.name %>
                                </option>
                                <% }) %>
                        </select>
                    </div>
                    <div>
                        <label for="category" class="categoria">Sección:</label>
                        <select name="sectionId" class="form-control">
                            <% sections.forEach(section=> { %>
                                <option value="<%= section.id %>"  <%= section.id == sectionId && 'selected' %>>
                                    <%= section.name %>
                                </option>
                                <% }) %>
                        </select>
                    </div>
                    <div>
                        <div>
                            <% ingredientsDB.forEach(ingredient => { %>
                                <label for="<%= ingredient.name + ingredient.id %>">
                                    <input 
                                    class="ingredients"
                                        type="checkbox" 
                                        name="ingredients" 
                                        id="<%= ingredient.name + ingredient.id %>" 
                                        value="<%= ingredient.id %>"
                                        <%=  ingredients.some(i => i.id == ingredient.id) && 'checked' %>
                                    ><%= ingredient.name %>
                                </label>
                            <% }) %>
                        </div>
                    </div>
              <div >
                        <label for="file">Imagen:</label>
                        <input type="file" name="image" id="avatar1" accept="image/*">
                        <img id="avatar1" src="/images/placeholder.png" alt="Avatar Preview" >
                        <div id="avatarPreview" class="avatar-preview">

                        </div>
                    <div class="cajaButton">
                        <div>
                            <button type="submit" class="bCrear">Guardar</button>

                        </div>
                    </div>
            </form>
            <script type="module" src="/javascripts/productsValidationJS.js"></script>
        </div>

        </div>
    </div>
    </section>
        <script src="/javascripts/imagenCambio.js"></script>
        <%-include("../partials/footer.ejs") %>